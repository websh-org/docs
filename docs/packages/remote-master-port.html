<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,400i,700,700i&display=swap">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Fira+Sans:400,400i,500,500i,600,600i,700,700i&display=swap&subset=latin-ext">

  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/image.css"
    integrity="sha256-F35NJZtdA4AJEz0RQVWT2C3xC1WHMf2Kv/ANYLx0q9w=" crossorigin="anonymous" />
  <link rel="stylesheet" href="/_styles/github.css">
  <link rel="stylesheet" href="/_styles/styles.css">
  
  </link>
  <title>@websh/remote-master-port</title>
</head>

<body>
  <div id="canvas">
    <header id="header">

    </header>
    <div id="main">
        <div id="content">
            <div id="pane">
        <nav id="nav"><a class="item openable open visible" data-nav-level="0" href=" /">
            WebShell
          </a><a class="item openable visible" data-nav-level="1" href=" /getting-started/">
            Getting Started
          </a><a class="item " data-nav-level="2" href=" /getting-started/sandbox">
            Visit WebShell Sandbox
          </a><a class="item " data-nav-level="2" href=" /getting-started/template-repos">
            App Template Repos
          </a><a class="item openable visible" data-nav-level="1" href=" /app-developer-guide/">
            App Developer&#39;s Guide
          </a><a class="item " data-nav-level="2" href=" /app-developer-guide/works-how">
            How It Works
          </a><a class="item openable" data-nav-level="2" href=" /tutorial/">
            Tutorial
          </a><a class="item " data-nav-level="3" href=" /tutorial/step1">
            Step 1 - Import the library
          </a><a class="item " data-nav-level="3" href=" /tutorial/step2">
            Step 2 - App manifest
          </a><a class="item " data-nav-level="3" href=" /tutorial/step3">
            Step 3 - See it in action
          </a><a class="item " data-nav-level="3" href=" /tutorial/step4">
            Step 4 - Declare file operations
          </a><a class="item " data-nav-level="3" href=" /tutorial/step5">
            Step 5 - Implement file operations
          </a><a class="item " data-nav-level="3" href=" /tutorial/step6">
            Step 6 - Make and publish a real app
          </a><a class="item openable visible" data-nav-level="1" href=" /api/">
            Docs
          </a><a class="item " data-nav-level="2" href=" /api/app-manifest">
            App Manifest
          </a><a class="item openable" data-nav-level="2" href=" /api/file/">
            File API
          </a><a class="item " data-nav-level="3" href=" /api/file/manifest">
            Manifest
          </a><a class="item " data-nav-level="3" href=" /api/file/commands">
            Commands
          </a><a class="item openable open visible" data-nav-level="1" href=" /packages/">
            Npm Packages
          </a><a class="item visible" data-nav-level="2" href=" /packages/web-shell-app">
            web-shell-app
          </a><a class="item visible" data-nav-level="2" href=" /packages/remote-slave-port">
            remote-slave-port
          </a><a class="item open visible active" data-nav-level="2" href=" /packages/remote-master-port">
            remote-master-port
          </a><a class="item visible" data-nav-level="1" href=" /about">
            About
          </a></nav>
      </div>
      <aside><nav id="toc">
          <a class="item" data-toc-level="1" href="##">
            @websh/remote-master-port
          </a><a class="item" data-toc-level="2""  href=" #synopsis">
            Synopsis
          </a><a class="item" data-toc-level="2""  href=" #methods">
            Methods
          </a><a class="item" data-toc-level="3""  href=" #codeasync-connectcode">
            <code>async connect()</code>
          </a><a class="item" data-toc-level="3""  href=" #codesend-string-command-object-args-code">
            <code>send( String command, Object args )</code>
          </a><a class="item" data-toc-level="3""  href=" #codeasync-request-string-command-object-args-code">
            <code>async request( String command, Object args )</code>
          </a><a class="item" data-toc-level="3""  href=" #codeon-string-event-object-data-code">
            <code>.on( String event, Object data )</code>
          </a></nav></aside>
        <article class="markdown-body">
          <a name="#"></a><h1>
            @websh/remote-master-port
          </h1><p><strong><a href="https://github.com/websh-org/remote-master-port">https://github.com/websh-org/remote-master-port</a></strong></p>
<p>Master port for async cross-iframe messaging. Load this in the top window.</p>
<p>See <a href="remote-slave-port">remote-slave-port</a> for the other side of the channel (in the iframe).</p>
<p>The master port must innitiate the connection. </p>

      <h2>
        <a name="synopsis" class="anchor" href="#synopsis">
          <span class="header-link"></span>
        </a>
        Synopsis
      </h2><pre><code class="language-bash">$ npm install @websh/remote-master-port</code></pre>
<pre><code class="language-js"><span class="hljs-keyword">import</span> { RemoteMasterPort } <span class="hljs-keyword">from</span> <span class="hljs-string">"@websh/remote-master-port"</span>;

<span class="hljs-comment">// the slave port in a child iframe must use </span>
<span class="hljs-comment">// the same channelId to establish a channel</span>
<span class="hljs-keyword">const</span> channelId = <span class="hljs-string">"my-channel"</span>; 
<span class="hljs-keyword">const</span> myIframe = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'my-iframe'</span>)
<span class="hljs-keyword">const</span> myMasterPort = <span class="hljs-keyword">new</span> RemoteMasterPort(channelId,myIframe);</code></pre>

      <h2>
        <a name="methods" class="anchor" href="#methods">
          <span class="header-link"></span>
        </a>
        Methods
      </h2><p>All methods return the MasterSlavePort object, so you can chain method calls.</p>

      <h3>
        <a name="codeasync-connectcode" class="anchor" href="#codeasync-connectcode">
          <span class="header-link"></span>
        </a>
        <code>async connect()</code>
      </h3><p>Connect to the iframe. Returns the slave port&#39;s manifest or throws an error if connection has failed.</p>

      <h3>
        <a name="codesend-string-command-object-args-code" class="anchor" href="#codesend-string-command-object-args-code">
          <span class="header-link"></span>
        </a>
        <code>send( String command, Object args )</code>
      </h3><p>Send a command to the slave port, ignore any results.</p>

      <h3>
        <a name="codeasync-request-string-command-object-args-code" class="anchor" href="#codeasync-request-string-command-object-args-code">
          <span class="header-link"></span>
        </a>
        <code>async request( String command, Object args )</code>
      </h3><p>Send a command to the slave port, and wait for the result.</p>

      <h3>
        <a name="codeon-string-event-object-data-code" class="anchor" href="#codeon-string-event-object-data-code">
          <span class="header-link"></span>
        </a>
        <code>.on( String event, Object data )</code>
      </h3><p>Handle an event sent by the slave port.</p>

        </article>
      </div>
    </div>
    <div>
</body>

</html>